[build]
  builder = "DOCKERFILE"
  dockerfile = "Dockerfile"
  publish = "staticfiles"

[deploy]
  startCommand = "/app/entrypoint.sh"
  healthcheckPath = "/"
  healthcheckTimeout = 300  # 5 minutos
  restartDelay = 30
  restartMax = 3
  restartTimeout = 600  # 10 minutos
  restartWindow = 1200  # 20 minutos
  zeroDowntime = false

[build.environment]
  PYTHONUNBUFFERED = "1"
  PYTHONPATH = "/app"
  PYTHON_VERSION = "3.11.4"
  NODE_VERSION = "18"

[deploy.environment]
  # Configuración de Django
  DEBUG = "False"
  DJANGO_SETTINGS_MODULE = "mascotas_perdidas.settings"
  SECRET_KEY = "your-secret-key-here"  # Asegúrate de reemplazarlo con una clave segura
  ALLOWED_HOSTS = "*"
  CSRF_TRUSTED_ORIGINS = "https://*.railway.app"
  
  # Configuración de la base de datos
  DATABASE_URL = "postgresql://postgres:postgres@localhost:5432/railway"
  
  # Configuración de Gunicorn
  GUNICORN_CMD_ARGS = "--workers=3 --timeout=600 --log-level=debug --access-logfile - --error-logfile -"
  
  # Configuración de logs
  PYTHONUNBUFFERED = "1"
  PYTHONDONTWRITEBYTECODE = "1"
