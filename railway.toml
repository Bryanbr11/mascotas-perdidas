[build]
  builder = "NIXPACKS"
  buildCommand = "pip install -r requirements.txt"
  publish = "staticfiles"

[deploy]
  startCommand = "python manage.py migrate --noinput && python manage.py collectstatic --noinput --clear"
  healthcheckPath = "/health/"
  healthcheckTimeout = 30
  healthcheckInterval = 15
  restartDelay = 5
  restartMax = 3
  restartTimeout = 120

[build.environment]
  PYTHON_VERSION = "3.11.4"

[deploy.environment]
  DJANGO_SETTINGS_MODULE = "mascotas_perdidas.settings"
  PYTHONUNBUFFERED = "1"
  DEBUG = "False"
  SECRET_KEY = "${SECRET_KEY}"
  ALLOWED_HOSTS = "*"
  CSRF_TRUSTED_ORIGINS = "https://*.railway.app"
  PORT = "8000"
  STATIC_URL = "/static/"
  STATIC_ROOT = "/app/staticfiles"
